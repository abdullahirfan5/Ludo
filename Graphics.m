%% Graphics
main = figure('Position',[33 60 1300 600],'Color','k','Name','Ludo','numbertitle','off','menubar','none'); % The figure handle
h4 = uicontrol(main,'Style','PushButton','Units','normalized','String','Exit','Position',[0.8 0.9 0.1 0.06]); % The exit button

set(h4,'Callback','done = back') % Callback for the exit button

axis equal
hold on
axis([-0.2 15.2 -0.2 15.2 -1 3])
camproj('perspective') % Makes far objects appear far away
axis off
x = [2 3 3 4]; 
y = [3 2 4 3];
theta = 0:90:270;

%% Bases
fill3([0 6 6 0],[0 0 6 6],[0 0 0 0],'g') %Green base
fill3([0 6 6 0],[9 9 15 15],[0 0 0 0],'r') %Red base
fill3([9 15 15 9],[0 0 6 6],[0 0 0 0],'y') %Yellow base
fill3([9 15 15 9],[9 9 15 15],[0 0 0 0],'b') %Blue base
%--------------------------------------------------------------%

%% Route
for i = 0:5
    for j = 6:8
        fill3((j+0.5 + (sqrt(2)/2)*cosd(theta-45)),(i+0.5 + (sqrt(2)/2)*sind(theta-45)),([0 0 0 0]),'w')
        fill3((j+0.5 + (sqrt(2)/2)*cosd(theta-45)),(i+9.5 + (sqrt(2)/2)*sind(theta-45)),([0 0 0 0]),'w')
        fill3((i+0.5 + (sqrt(2)/2)*cosd(theta-45)),(j+0.5 + (sqrt(2)/2)*sind(theta-45)),([0 0 0 0]),'w')
        fill3((i+9.5 + (sqrt(2)/2)*cosd(theta-45)),(j+0.5 + (sqrt(2)/2)*sind(theta-45)),([0 0 0 0]),'w')
    end
end
%--------------------------------------------------------------%

for i = 1:5
    %% Black path
    fill3((7.5 + (sqrt(2)/2)*cosd(theta-45)),(i+0.5 + (sqrt(2)/2)*sind(theta-45)),([0.01 0.01 0.01 0.01]),'k')
    fill3((i+0.5 + (sqrt(2)/2)*cosd(theta-45)),(7.5 + (sqrt(2)/2)*sind(theta-45)),([0.01 0.01 0.01 0.01]),'k')
    fill3((7.5 + (sqrt(2)/2)*cosd(theta-45)),(i+8.5 + (sqrt(2)/2)*sind(theta-45)),([0.01 0.01 0.01 0.01]),'k')
    fill3((i+8.5 + (sqrt(2)/2)*cosd(theta-45)),(7.5 + (sqrt(2)/2)*sind(theta-45)),([0.01 0.01 0.01 0.01]),'k')
    %--------------------------------------------------------------%
    
    %% Diamonds
    fill3((7.5 + 0.5*cosd(theta)),(i+0.5 + 0.5*sind(theta)),([0.05 0.05 0.05 0.05]),'g') %Green
    fill3((i+0.5 + 0.5*cosd(theta)),(7.5 + 0.5*sind(theta)),([0.05 0.05 0.05 0.05]),'r') %Red
    fill3((7.5 + 0.5*cosd(theta)),(i+8.5 + 0.5*sind(theta)),([0.05 0.05 0.05 0.05]),'b') %Blue
    fill3((i+8.5 + 0.5*cosd(theta)),(7.5 + 0.5*sind(theta)),([0.05 0.05 0.05 0.05]),'y') %Green
end
%--------------------------------------------------------------%

%% Bases
for i = [3 12]
    %% Diamonds in bases
    for j = [3 12]
        fill3((i + 3*cosd(theta)),(j + 3*sind(theta)),([0.01 0.01 0.01 0.01]),'w','EdgeColor',[0.647 0.640 0.640],'linewidth',3) %Large diamonds in bases
        fill3((i + 2*cosd(theta)),(j + 2*sind(theta)),([0.02 0.02 0.02 0.02]),'w','EdgeColor',[0.647 0.640 0.640],'linewidth',3) %Small diamonds in bases
    end
end
%--------------------------------------------------------------%

for i = 1:4
    %% Spawns
    fill3((x(i) + 0.65*cosd(theta-45)),(y(i) + 0.65*sind(theta-45)),([0.03 0.03 0.03 0.03]),'g','EdgeColor','g') %Green spawns
    fill3((x(i) + 0.65*cosd(theta-45)),(y(i)+9 + 0.65*sind(theta-45)),([0.03 0.03 0.03 0.03]),'r','EdgeColor','r') %Red spawns
    fill3((x(i)+9 + 0.65*cosd(theta-45)),(y(i) + 0.65*sind(theta-45)),([0.03 0.03 0.03 0.03]),'y','EdgeColor','y') %Yellow spawns
    fill3((x(i)+9 + 0.65*cosd(theta-45)),(y(i)+9 + 0.65*sind(theta-45)),([0.03 0.03 0.03 0.03]),'b','EdgeColor','b') %Blue spawns
end
%--------------------------------------------------------------%

%% Black safe zones followed by their respective colored diamonds
fill3((8.5 + (sqrt(2)/2)*cosd(theta-45)),(2.5 + (sqrt(2)/2)*sind(theta-45)),([0.01 0.01 0.01 0.01]),'k')
fill3((8.5 + 0.5*cosd(theta)),(2.5 + 0.5*sind(theta)),([0.05 0.05 0.05 0.05]),'g')
fill3((12.5 + (sqrt(2)/2)*cosd(theta-45)),(8.5 + (sqrt(2)/2)*sind(theta-45)),([0.01 0.01 0.01 0.01]),'k')
fill3((12.5 + 0.5*cosd(theta)),(8.5 + 0.5*sind(theta)),([0.05 0.05 0.05 0.05]),'y')
fill3((6.5 + (sqrt(2)/2)*cosd(theta-45)),(12.5 + (sqrt(2)/2)*sind(theta-45)),([0.01 0.01 0.01 0.01]),'k')
fill3((6.5 + 0.5*cosd(theta)),(12.5 + 0.5*sind(theta)),([0.05 0.05 0.05 0.05]),'b')
fill3((2.5 + (sqrt(2)/2)*cosd(theta-45)),(6.5 + (sqrt(2)/2)*sind(theta-45)),([0.01 0.01 0.01 0.01]),'k')
fill3((2.5 + 0.5*cosd(theta)),(6.5 + 0.5*sind(theta)),([0.05 0.05 0.05 0.05]),'r')
fill3((1.5 + (sqrt(2)/2)*cosd(theta-45)),(8.5 + (sqrt(2)/2)*sind(theta-45)),([0.01 0.01 0.01 0.01]),'k')
fill3((1.5 + 0.5*cosd(theta)),(8.5 + 0.5*sind(theta)),([0.05 0.05 0.05 0.05]),'r')
fill3((8.5 + (sqrt(2)/2)*cosd(theta-45)),(13.5 + (sqrt(2)/2)*sind(theta-45)),([0.01 0.01 0.01 0.01]),'k')
fill3((8.5 + 0.5*cosd(theta)),(13.5 + 0.5*sind(theta)),([0.05 0.05 0.05 0.05]),'b')
fill3((6.5 + (sqrt(2)/2)*cosd(theta-45)),(1.5 + (sqrt(2)/2)*sind(theta-45)),([0.01 0.01 0.01 0.01]),'k')
fill3((6.5 + 0.5*cosd(theta)),(1.5 + 0.5*sind(theta)),([0.05 0.05 0.05 0.05]),'g')
fill3((13.5 + (sqrt(2)/2)*cosd(theta-45)),(6.5 + (sqrt(2)/2)*sind(theta-45)),([0.01 0.01 0.01 0.01]),'k')
fill3((13.5 + 0.5*cosd(theta)),(6.5 + 0.5*sind(theta)),([0.05 0.05 0.05 0.05]),'y')
%--------------------------------------------------------------%

%% Homes
fill3((7.5 + 1.5*cosd(theta(1:3))),(6.0 + 1.5*sind(theta(1:3))), ([0.06 0.06 0.06]),'g','linewidth',3,'EdgeColor',[0.647 0.640 0.640]) %Green home
fill3((6.0 + 1.5*cosd(theta(1:3)-90)),(7.5 + 1.5*sind(theta(1:3)-90)), ([0.06 0.06 0.06]),'r','linewidth',3,'EdgeColor',[0.647 0.640 0.640]) %Red home
fill3((7.5 + 1.5*cosd(theta(1:3)-180)),(9.0 + 1.5*sind(theta(1:3)-180)), ([0.06 0.06 0.06]),'b','linewidth',3,'EdgeColor',[0.647 0.640 0.640]) %Blue home
fill3((9.0 + 1.5*cosd(theta(1:3)-270)),(7.5 + 1.5*sind(theta(1:3)-270)), ([0.06 0.06 0.06]),'y','linewidth',3,'EdgeColor',[0.647 0.640 0.640]) %Yellow home
%--------------------------------------------------------------%

%% 3d borders
%Front border
fill3([0 15 15 0],[0 0 -0.2 -0.2],[0 0 -0.2 -0.2],[0.435 0.435 0.435],'EdgeColor',[0.647 0.640 0.640])
fill3([0 15 15 0],[-0.2 -0.2 -0.2 -0.2],[-0.2 -0.2 -1.0 -1.0],[0.647 0.64 0.64],'EdgeColor',[0.647 0.640 0.640])
%--------------------------------------------------------------%
%Front left corner
fill3([0 -0.2 0],[0 0 -0.2],[0 -0.2 -0.2],[0.435 0.435 0.435],'EdgeColor',[0.435 0.435 0.435])
fill3([0 0 -0.2 -0.2],[-0.2 -0.2 0 0],[-0.2 -1.0 -1.0 -0.2],[0.435 0.435 0.435],'EdgeColor',[0.435 0.435 0.435])
%--------------------------------------------------------------%
%Left border
fill3([0 0 -0.2 -0.2],[0 15 15 0],[0 0 -0.2 -0.2],[0.435 0.435 0.435],'EdgeColor',[0.435 0.435 0.435])
fill3([-0.2 -0.2 -0.2 -0.2],[0 15 15 0],[-0.2 -0.2 -1.0 -1.0],[0.647 0.640 0.640],'EdgeColor',[0.647 0.640 0.640])
%--------------------------------------------------------------%
%Rear border
fill3([0 0 15 15],[15 15.2 15.2 15],[0 -0.2 -0.2 0],[0.435 0.435 0.435],'EdgeColor',[0.435 0.435 0.435])
fill3([0 0 15 15],[15.2 15.2 15.2 15.2],[-0.2 -1.0 -1.0 -0.2],[0.647 0.640 0.640],'EdgeColor',[0.647 0.640 0.640])
%--------------------------------------------------------------%
%Rear left corner
fill3([0 -0.2 0],[15 15 15.2],[0 -0.2 -0.2],[0.435 0.435 0.435],'EdgeColor',[0.435 0.435 0.435])
fill3([0 0 -0.2 -0.2],[15.2 15.2 15 15],[-0.2 -1.0 -1.0 -0.2],[0.435 0.435 0.435],'EdgeColor',[0.435 0.435 0.435])
%--------------------------------------------------------------%
%Right border
fill3([15 15 15.2 15.2],[0 15 15 0],[0 0 -0.2 -0.2],[0.435 0.435 0.435],'EdgeColor',[0.435 0.435 0.435])
fill3([15.2 15.2 15.2 15.2],[0 15 15 0],[-0.2 -0.2 -1.0 -1.0],[0.647 0.640 0.640],'EdgeColor',[0.647 0.640 0.640])
%--------------------------------------------------------------%
%Rear right corner
fill3([15 15.2 15],[15 15 15.2],[0 -0.2 -0.2],[0.435 0.435 0.435],'EdgeColor',[0.435 0.435 0.435])
fill3([15.2 15.2 15 15],[15 15 15.2 15.2],[-0.2 -1.0 -1.0 -0.2],[0.435 0.435 0.435],'EdgeColor',[0.435 0.435 0.435])
%--------------------------------------------------------------%
%Front right corner
fill3([15 15.2 15],[0 0 -0.2],[0 -0.2 -0.2],[0.435 0.435 0.435],'EdgeColor',[0.435 0.435 0.435])
fill3([15 15 15.2 15.2],[-0.2 -0.2 0 0],[-0.2 -1.0 -1.0 -0.2],[0.435 0.435 0.435],'EdgeColor',[0.435 0.435 0.435])
%--------------------------------------------------------------%
%% Playing Peices

% '1' pieces
x1{1} = [0.4*cosd(0:18:342) -0.1; 0.4*cosd(18:18:360) 0.1; 0.1*cosd(18:18:360) 0.1; 0.1*cosd(0:18:342) -0.1];
y1{1} = [0.4*sind(0:18:342) 0; 0.4*sind(18:18:360) 0; 0.1*sind(18:18:360) 0; 0.1*sind(0:18:342) 0];
z1{1} = [zeros(1,20)+0.06 1.5; zeros(1,20)+0.06 1.5; ones(1,20)+0.06 2.5; ones(1,20)+0.06 2.5];
%--------------------------------------------------------------%

% '2' pieces
x1{2} = [0.4*cosd(0:18:342) -0.3; 0.4*cosd(18:18:360) 0.3; 0.1*cosd(18:18:360) 0.3; 0.1*cosd(0:18:342) -0.3; zeros(1,20) -0.1; zeros(1,20) -0.1; zeros(1,20) 0.3; zeros(1,20) 0.3; zeros(1,20) -0.3; zeros(1,20) -0.3; zeros(1,20) 0.1; zeros(1,20) 0.1; zeros(1,20) -0.3];
y1{2} = [0.4*sind(0:18:342) 0; 0.4*sind(18:18:360) 0; 0.1*sind(18:18:360) 0; 0.1*sind(0:18:342) 0; zeros(1,21); zeros(1,21); zeros(1,21); zeros(1,21); zeros(1,21); zeros(1,21); zeros(1,21); zeros(1,21); zeros(1,21)];
z1{2} = [zeros(1,20)+0.06 1.5; zeros(1,20)+0.06 1.5; ones(1,20)+0.06 1.7; ones(1,20)+0.06 1.7; ones(1,20)+0.06 1.7; ones(1,20)+0.06 1.9; ones(1,20)+0.06 1.9; ones(1,20)+0.06 2.5; ones(1,20)+0.06 2.5; ones(1,20)+0.06 2.3; ones(1,20)+0.06 2.3; ones(1,20)+0.06 2.1; ones(1,20)+0.06 2.1];
%--------------------------------------------------------------%

% '3' pieces
x1{3} = [0.4*cosd(0:18:342) -0.3; 0.4*cosd(18:18:360) 0.3; 0.1*cosd(18:18:360) 0.3; 0.1*cosd(0:18:342) -0.3; zeros(1,20) -0.3; zeros(1,20) 0.1; zeros(1,20) 0.1; zeros(1,20) -0.1; zeros(1,20) -0.1; zeros(1,20) 0.1; zeros(1,20) 0.1; zeros(1,20) -0.3];
y1{3} = [0.4*sind(0:18:342) 0; 0.4*sind(18:18:360) 0; 0.1*sind(18:18:360) 0; 0.1*sind(0:18:342) 0; zeros(1,21); zeros(1,21); zeros(1,21); zeros(1,21); zeros(1,21); zeros(1,21); zeros(1,21); zeros(1,21)];
z1{3} = [zeros(1,20)+0.06 1.5; zeros(1,20)+0.06 1.5; ones(1,20)+0.06 2.5; ones(1,20)+0.06 2.5; ones(1,20)+0.06 2.3; ones(1,20)+0.06 2.3; ones(1,20)+0.06 2.1; ones(1,20)+0.06 2.1; ones(1,20)+0.06 1.9; ones(1,20)+0.06 1.9; ones(1,20)+0.06 1.7; ones(1,20)+0.06 1.7];
%--------------------------------------------------------------%

% '4' pieces
x1{4} = [0.4*cosd(0:18:342) -0.3; 0.4*cosd(18:18:360) 0.1; 0.1*cosd(18:18:360) 0.1; 0.1*cosd(0:18:342) 0.3; zeros(1,20) 0.3; zeros(1,20) 0.1; zeros(1,20) 0.1; zeros(1,20) -0.1; zeros(1,20) -0.1; zeros(1,20) -0.3];
y1{4} = [0.4*sind(0:18:342) 0; 0.4*sind(18:18:360) 0; 0.1*sind(18:18:360) 0; 0.1*sind(0:18:342) 0; zeros(1,21); zeros(1,21); zeros(1,21); zeros(1,21); zeros(1,21); zeros(1,21)];
z1{4} = [zeros(1,20)+0.06 1.7; zeros(1,20)+0.06 1.7; ones(1,20)+0.06 1.5; ones(1,20)+0.06 1.5; ones(1,20)+0.06 2.5; ones(1,20)+0.06 2.5; ones(1,20)+0.06 1.9; ones(1,20)+0.06 1.9; ones(1,20)+0.06 2.5; ones(1,20)+0.06 2.5];
%--------------------------------------------------------------%

for i = 1:4
    g(i) = patch(x1{i} + x(i), y1{i} + y(i), z1{i}, [0 180/255 0], 'EdgeColor', [0 180/255 0]); % Green pieces
    r(i) = patch(x1{i} + x(i), y1{i} + y(i) + 9, z1{i}, [180/255 0 0], 'EdgeColor', [180/255 0 0]); % Red pieces
    b(i) = patch(x1{i} + x(i) + 9, y1{i} + y(i) + 9, z1{i}, [0 0 180/255], 'EdgeColor', [0 0 180/255]); % Blue pieces
    yl(i) = patch(x1{i} + x(i) + 9, y1{i} + y(i), z1{i}, [180/255 180/255 0], 'EdgeColor', [180/255 180/255 0]); % Yellow pieces
end

view(-20, 35);